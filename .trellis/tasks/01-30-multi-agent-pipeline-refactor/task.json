{
  "id": "multi-agent-pipeline-refactor",
  "name": "multi-agent-pipeline-refactor",
  "title": "Multi-Agent Pipeline 重构 - Agent Registry, Phase, Pipeline 脚本",
  "description": "",
  "status": "planning",
  "dev_type": "backend",
  "scope": null,
  "priority": "P2",
  "creator": "taosu",
  "assignee": "taosu",
  "createdAt": "2026-01-30",
  "completedAt": null,
  "branch": null,
  "base_branch": null,
  "worktree_path": null,
  "current_phase": 2,
  "next_action": [
    {
      "phase": 1,
      "action": "implement"
    },
    {
      "phase": 2,
      "action": "check"
    },
    {
      "phase": 3,
      "action": "finish"
    },
    {
      "phase": 4,
      "action": "create-pr"
    }
  ],
  "commit": null,
  "pr_url": null,
  "subtasks": [
    "Phase 1: core/pipeline/schemas.ts - Zod schemas",
    "Phase 1: core/pipeline/state.ts - 统一状态管理",
    "Phase 1: core/pipeline/worktree.ts - Worktree 管理",
    "Phase 1: core/pipeline/orchestrator.ts - 编排逻辑",
    "Phase 2: core/platforms/claude/launcher.ts - Agent 启动",
    "Phase 3: core/task/queue.ts - 任务队列筛选",
    "Phase 4: cli/commands/pipeline/* - CLI 命令",
    "Phase 5: 清理 shell 脚本到 _archive/",
    "Phase 6: 验证 + 更新文档"
  ],
  "relatedFiles": [
    ".trellis/scripts/multi-agent/",
    ".trellis/scripts/common/registry.sh",
    ".trellis/scripts/common/phase.sh",
    ".trellis/scripts/common/worktree.sh",
    "src/core/platforms/claude/"
  ],
  "notes": "Brainstorm completed 2026-01-30. Key decisions: 一次性迁移, per-developer registry, hooks 暂不迁移, 模板暂不动."
}